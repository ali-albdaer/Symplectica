{"version":3,"file":"solar_sim_wasm-DnAbslE-.js","sources":["../../src/wasm/pkg/solar_sim_wasm.js"],"sourcesContent":["/* @ts-self-types=\"./solar_sim_wasm.d.ts\" */\n\n/**\n * The main simulation engine exposed to JavaScript.\n * Keeps all state in Rust memory and communicates via JSON serialization.\n */\nexport class SimEngine {\n    static __wrap(ptr) {\n        ptr = ptr >>> 0;\n        const obj = Object.create(SimEngine.prototype);\n        obj.__wbg_ptr = ptr;\n        SimEngineFinalization.register(obj, obj.__wbg_ptr, obj);\n        return obj;\n    }\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        SimEngineFinalization.unregister(this);\n        return ptr;\n    }\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_simengine_free(ptr, 0);\n    }\n    /**\n     * Add a body from JSON\n     * @param {string} json\n     */\n    addBody(json) {\n        const ptr0 = passStringToWasm0(json, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.simengine_addBody(this.__wbg_ptr, ptr0, len0);\n        if (ret[1]) {\n            throw takeFromExternrefTable0(ret[0]);\n        }\n    }\n    /**\n     * Apply a thrust to a body\n     * @param {bigint} body_id\n     * @param {number} fx\n     * @param {number} fy\n     * @param {number} fz\n     * @param {number} duration\n     */\n    applyThrust(body_id, fx, fy, fz, duration) {\n        wasm.simengine_applyThrust(this.__wbg_ptr, body_id, fx, fy, fz, duration);\n    }\n    /**\n     * Get body count\n     * @returns {number}\n     */\n    bodyCount() {\n        const ret = wasm.simengine_bodyCount(this.__wbg_ptr);\n        return ret >>> 0;\n    }\n    /**\n     * Get center of mass as [x, y, z]\n     * @returns {Float64Array}\n     */\n    centerOfMass() {\n        const ret = wasm.simengine_centerOfMass(this.__wbg_ptr);\n        var v1 = getArrayF64FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 8, 8);\n        return v1;\n    }\n    /**\n     * Load state from JSON\n     * @param {string} json\n     * @returns {SimEngine}\n     */\n    static fromJson(json) {\n        const ptr0 = passStringToWasm0(json, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.simengine_fromJson(ptr0, len0);\n        if (ret[2]) {\n            throw takeFromExternrefTable0(ret[1]);\n        }\n        return SimEngine.__wrap(ret[0]);\n    }\n    /**\n     * Create from a preset scenario\n     * @param {string} preset_name\n     * @param {bigint} seed\n     * @returns {SimEngine}\n     */\n    static fromPreset(preset_name, seed) {\n        const ptr0 = passStringToWasm0(preset_name, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.simengine_fromPreset(ptr0, len0, seed);\n        if (ret[2]) {\n            throw takeFromExternrefTable0(ret[1]);\n        }\n        return SimEngine.__wrap(ret[0]);\n    }\n    /**\n     * Get a specific body as JSON\n     * @param {bigint} id\n     * @returns {string | undefined}\n     */\n    getBody(id) {\n        const ret = wasm.simengine_getBody(this.__wbg_ptr, id);\n        let v1;\n        if (ret[0] !== 0) {\n            v1 = getStringFromWasm0(ret[0], ret[1]).slice();\n            wasm.__wbindgen_free(ret[0], ret[1] * 1, 1);\n        }\n        return v1;\n    }\n    /**\n     * Get body names\n     * @returns {string}\n     */\n    getBodyNames() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const ret = wasm.simengine_getBodyNames(this.__wbg_ptr);\n            deferred1_0 = ret[0];\n            deferred1_1 = ret[1];\n            return getStringFromWasm0(ret[0], ret[1]);\n        } finally {\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * Get a checkpoint as JSON\n     * @returns {string}\n     */\n    getCheckpoint() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const ret = wasm.simengine_getCheckpoint(this.__wbg_ptr);\n            deferred1_0 = ret[0];\n            deferred1_1 = ret[1];\n            return getStringFromWasm0(ret[0], ret[1]);\n        } finally {\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * Get conservation diagnostics as JSON\n     * @returns {string}\n     */\n    getConservationDiagnostics() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const ret = wasm.simengine_getConservationDiagnostics(this.__wbg_ptr);\n            deferred1_0 = ret[0];\n            deferred1_1 = ret[1];\n            return getStringFromWasm0(ret[0], ret[1]);\n        } finally {\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * Get body positions as a flat Float64Array for efficient rendering\n     * Layout: [x0, y0, z0, x1, y1, z1, ...]\n     * @returns {Float64Array}\n     */\n    getPositions() {\n        const ret = wasm.simengine_getPositions(this.__wbg_ptr);\n        var v1 = getArrayF64FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 8, 8);\n        return v1;\n    }\n    /**\n     * Get body positions relative to a camera origin for f32 rendering\n     * Returns Float32Array with camera-relative coordinates\n     * @param {number} cam_x\n     * @param {number} cam_y\n     * @param {number} cam_z\n     * @returns {Float32Array}\n     */\n    getPositionsRelative(cam_x, cam_y, cam_z) {\n        const ret = wasm.simengine_getPositionsRelative(this.__wbg_ptr, cam_x, cam_y, cam_z);\n        var v1 = getArrayF32FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 4, 4);\n        return v1;\n    }\n    /**\n     * Get body radii\n     * @returns {Float64Array}\n     */\n    getRadii() {\n        const ret = wasm.simengine_getRadii(this.__wbg_ptr);\n        var v1 = getArrayF64FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 8, 8);\n        return v1;\n    }\n    /**\n     * Get full state as JSON\n     * @returns {string}\n     */\n    getState() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const ret = wasm.simengine_getState(this.__wbg_ptr);\n            deferred1_0 = ret[0];\n            deferred1_1 = ret[1];\n            return getStringFromWasm0(ret[0], ret[1]);\n        } finally {\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * Get velocities as flat Float64Array\n     * @returns {Float64Array}\n     */\n    getVelocities() {\n        const ret = wasm.simengine_getVelocities(this.__wbg_ptr);\n        var v1 = getArrayF64FromWasm0(ret[0], ret[1]).slice();\n        wasm.__wbindgen_free(ret[0], ret[1] * 8, 8);\n        return v1;\n    }\n    /**\n     * Create a new simulation from default config\n     */\n    constructor() {\n        const ret = wasm.simengine_new();\n        this.__wbg_ptr = ret >>> 0;\n        SimEngineFinalization.register(this, this.__wbg_ptr, this);\n        return this;\n    }\n    /**\n     * Generate a next unique body ID\n     * @returns {bigint}\n     */\n    nextBodyId() {\n        const ret = wasm.simengine_nextBodyId(this.__wbg_ptr);\n        return BigInt.asUintN(64, ret);\n    }\n    /**\n     * Get a random u64 from the deterministic RNG\n     * @returns {bigint}\n     */\n    randomU64() {\n        const ret = wasm.simengine_randomU64(this.__wbg_ptr);\n        return BigInt.asUintN(64, ret);\n    }\n    /**\n     * Remove a body by ID\n     * @param {bigint} id\n     * @returns {boolean}\n     */\n    removeBody(id) {\n        const ret = wasm.simengine_removeBody(this.__wbg_ptr, id);\n        return ret !== 0;\n    }\n    /**\n     * Restore from a checkpoint JSON\n     * @param {string} json\n     */\n    restoreCheckpoint(json) {\n        const ptr0 = passStringToWasm0(json, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.simengine_restoreCheckpoint(this.__wbg_ptr, ptr0, len0);\n        if (ret[1]) {\n            throw takeFromExternrefTable0(ret[0]);\n        }\n    }\n    /**\n     * Set/update the simulation config from JSON\n     * @param {string} json\n     */\n    setConfig(json) {\n        const ptr0 = passStringToWasm0(json, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.simengine_setConfig(this.__wbg_ptr, ptr0, len0);\n        if (ret[1]) {\n            throw takeFromExternrefTable0(ret[0]);\n        }\n    }\n    /**\n     * Set the active integrator\n     * @param {string} name\n     */\n    setIntegrator(name) {\n        const ptr0 = passStringToWasm0(name, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.simengine_setIntegrator(this.__wbg_ptr, ptr0, len0);\n        if (ret[1]) {\n            throw takeFromExternrefTable0(ret[0]);\n        }\n    }\n    /**\n     * Pause / unpause\n     * @param {boolean} paused\n     */\n    setPaused(paused) {\n        wasm.simengine_setPaused(this.__wbg_ptr, paused);\n    }\n    /**\n     * Set the active solver\n     * @param {string} solver_name\n     */\n    setSolver(solver_name) {\n        const ptr0 = passStringToWasm0(solver_name, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.simengine_setSolver(this.__wbg_ptr, ptr0, len0);\n        if (ret[1]) {\n            throw takeFromExternrefTable0(ret[0]);\n        }\n    }\n    /**\n     * Set time scale\n     * @param {number} scale\n     */\n    setTimeScale(scale) {\n        wasm.simengine_setTimeScale(this.__wbg_ptr, scale);\n    }\n    /**\n     * Set the timestep\n     * @param {number} dt\n     */\n    setTimestep(dt) {\n        wasm.simengine_setTimestep(this.__wbg_ptr, dt);\n    }\n    /**\n     * Step the simulation forward by one tick.\n     * Returns a JSON diagnostics object.\n     * @returns {string}\n     */\n    step() {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const ret = wasm.simengine_step(this.__wbg_ptr);\n            deferred1_0 = ret[0];\n            deferred1_1 = ret[1];\n            return getStringFromWasm0(ret[0], ret[1]);\n        } finally {\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * Step N ticks (for fast-forward)\n     * @param {number} n\n     * @returns {string}\n     */\n    stepN(n) {\n        let deferred1_0;\n        let deferred1_1;\n        try {\n            const ret = wasm.simengine_stepN(this.__wbg_ptr, n);\n            deferred1_0 = ret[0];\n            deferred1_1 = ret[1];\n            return getStringFromWasm0(ret[0], ret[1]);\n        } finally {\n            wasm.__wbindgen_free(deferred1_0, deferred1_1, 1);\n        }\n    }\n    /**\n     * Get current tick\n     * @returns {bigint}\n     */\n    get tick() {\n        const ret = wasm.simengine_tick(this.__wbg_ptr);\n        return BigInt.asUintN(64, ret);\n    }\n    /**\n     * Get current simulation time\n     * @returns {number}\n     */\n    get time() {\n        const ret = wasm.simengine_time(this.__wbg_ptr);\n        return ret;\n    }\n    /**\n     * Get total energy\n     * @returns {number}\n     */\n    totalEnergy() {\n        const ret = wasm.simengine_totalEnergy(this.__wbg_ptr);\n        return ret;\n    }\n}\nif (Symbol.dispose) SimEngine.prototype[Symbol.dispose] = SimEngine.prototype.free;\n\n/**\n * Initialize panic hook for better error messages in dev\n */\nexport function init() {\n    wasm.init();\n}\n\nfunction __wbg_get_imports() {\n    const import0 = {\n        __proto__: null,\n        __wbg___wbindgen_throw_be289d5034ed271b: function(arg0, arg1) {\n            throw new Error(getStringFromWasm0(arg0, arg1));\n        },\n        __wbindgen_cast_0000000000000001: function(arg0, arg1) {\n            // Cast intrinsic for `Ref(String) -> Externref`.\n            const ret = getStringFromWasm0(arg0, arg1);\n            return ret;\n        },\n        __wbindgen_init_externref_table: function() {\n            const table = wasm.__wbindgen_externrefs;\n            const offset = table.grow(4);\n            table.set(0, undefined);\n            table.set(offset + 0, undefined);\n            table.set(offset + 1, null);\n            table.set(offset + 2, true);\n            table.set(offset + 3, false);\n        },\n    };\n    return {\n        __proto__: null,\n        \"./solar_sim_wasm_bg.js\": import0,\n    };\n}\n\nconst SimEngineFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_simengine_free(ptr >>> 0, 1));\n\nfunction getArrayF32FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getFloat32ArrayMemory0().subarray(ptr / 4, ptr / 4 + len);\n}\n\nfunction getArrayF64FromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return getFloat64ArrayMemory0().subarray(ptr / 8, ptr / 8 + len);\n}\n\nlet cachedFloat32ArrayMemory0 = null;\nfunction getFloat32ArrayMemory0() {\n    if (cachedFloat32ArrayMemory0 === null || cachedFloat32ArrayMemory0.byteLength === 0) {\n        cachedFloat32ArrayMemory0 = new Float32Array(wasm.memory.buffer);\n    }\n    return cachedFloat32ArrayMemory0;\n}\n\nlet cachedFloat64ArrayMemory0 = null;\nfunction getFloat64ArrayMemory0() {\n    if (cachedFloat64ArrayMemory0 === null || cachedFloat64ArrayMemory0.byteLength === 0) {\n        cachedFloat64ArrayMemory0 = new Float64Array(wasm.memory.buffer);\n    }\n    return cachedFloat64ArrayMemory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return decodeText(ptr, len);\n}\n\nlet cachedUint8ArrayMemory0 = null;\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.byteLength === 0) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length, 1) >>> 0;\n        getUint8ArrayMemory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len, 1) >>> 0;\n\n    const mem = getUint8ArrayMemory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3, 1) >>> 0;\n        const view = getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\n        const ret = cachedTextEncoder.encodeInto(arg, view);\n\n        offset += ret.written;\n        ptr = realloc(ptr, len, offset, 1) >>> 0;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nfunction takeFromExternrefTable0(idx) {\n    const value = wasm.__wbindgen_externrefs.get(idx);\n    wasm.__externref_table_dealloc(idx);\n    return value;\n}\n\nlet cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\ncachedTextDecoder.decode();\nconst MAX_SAFARI_DECODE_BYTES = 2146435072;\nlet numBytesDecoded = 0;\nfunction decodeText(ptr, len) {\n    numBytesDecoded += len;\n    if (numBytesDecoded >= MAX_SAFARI_DECODE_BYTES) {\n        cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n        cachedTextDecoder.decode();\n        numBytesDecoded = len;\n    }\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(ptr, ptr + len));\n}\n\nconst cachedTextEncoder = new TextEncoder();\n\nif (!('encodeInto' in cachedTextEncoder)) {\n    cachedTextEncoder.encodeInto = function (arg, view) {\n        const buf = cachedTextEncoder.encode(arg);\n        view.set(buf);\n        return {\n            read: arg.length,\n            written: buf.length\n        };\n    };\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nlet wasmModule, wasm;\nfunction __wbg_finalize_init(instance, module) {\n    wasm = instance.exports;\n    wasmModule = module;\n    cachedFloat32ArrayMemory0 = null;\n    cachedFloat64ArrayMemory0 = null;\n    cachedUint8ArrayMemory0 = null;\n    wasm.__wbindgen_start();\n    return wasm;\n}\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n            } catch (e) {\n                const validResponse = module.ok && expectedResponseType(module.type);\n\n                if (validResponse && module.headers.get('Content-Type') !== 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else { throw e; }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n        } else {\n            return instance;\n        }\n    }\n\n    function expectedResponseType(type) {\n        switch (type) {\n            case 'basic': case 'cors': case 'default': return true;\n        }\n        return false;\n    }\n}\n\nfunction initSync(module) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (module !== undefined) {\n        if (Object.getPrototypeOf(module) === Object.prototype) {\n            ({module} = module)\n        } else {\n            console.warn('using deprecated parameters for `initSync()`; pass a single object instead')\n        }\n    }\n\n    const imports = __wbg_get_imports();\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n    const instance = new WebAssembly.Instance(module, imports);\n    return __wbg_finalize_init(instance, module);\n}\n\nasync function __wbg_init(module_or_path) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (module_or_path !== undefined) {\n        if (Object.getPrototypeOf(module_or_path) === Object.prototype) {\n            ({module_or_path} = module_or_path)\n        } else {\n            console.warn('using deprecated parameters for the initialization function; pass a single object instead')\n        }\n    }\n\n    if (module_or_path === undefined) {\n        module_or_path = new URL('solar_sim_wasm_bg.wasm', import.meta.url);\n    }\n    const imports = __wbg_get_imports();\n\n    if (typeof module_or_path === 'string' || (typeof Request === 'function' && module_or_path instanceof Request) || (typeof URL === 'function' && module_or_path instanceof URL)) {\n        module_or_path = fetch(module_or_path);\n    }\n\n    const { instance, module } = await __wbg_load(await module_or_path, imports);\n\n    return __wbg_finalize_init(instance, module);\n}\n\nexport { initSync, __wbg_init as default };\n"],"names":["SimEngine","ptr","obj","SimEngineFinalization","wasm","json","ptr0","passStringToWasm0","len0","WASM_VECTOR_LEN","ret","takeFromExternrefTable0","body_id","fx","fy","fz","duration","v1","getArrayF64FromWasm0","preset_name","seed","id","getStringFromWasm0","deferred1_0","deferred1_1","cam_x","cam_y","cam_z","getArrayF32FromWasm0","name","paused","solver_name","scale","dt","n","init","__wbg_get_imports","arg0","arg1","table","offset","len","getFloat32ArrayMemory0","getFloat64ArrayMemory0","cachedFloat32ArrayMemory0","cachedFloat64ArrayMemory0","decodeText","cachedUint8ArrayMemory0","getUint8ArrayMemory0","arg","malloc","realloc","buf","cachedTextEncoder","mem","code","view","idx","value","cachedTextDecoder","MAX_SAFARI_DECODE_BYTES","numBytesDecoded","__wbg_finalize_init","instance","module","__wbg_load","imports","e","expectedResponseType","bytes","type","initSync","__wbg_init","module_or_path"],"mappings":"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"}